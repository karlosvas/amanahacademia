---
export const prerender = true;

import { getI18N } from "@/../i18n/index";
import Layout from "@/layouts/Layout.astro";
import InfoPage from "@/components/security/Info.astro";
import { getSEOData } from "@/utils/seo";
import Footer from "@/components/Footer.astro";
import Theme from "@/components/Theme.astro";
import Traductor from "@/components/Traductor.astro";
import type { i18nTranslations, PropsSEO } from "@/types/types";
import { LANGS } from "@/utils/constants";

// Obtenemos el idioma obtenido mediante la ruta
const { lang } = Astro.params;
const data = getI18N({ lang }) as i18nTranslations;

// SEO data usando el helper
const currentLang = lang || "es";
const seoData = getSEOData("info", currentLang) as PropsSEO;

// Generamos las rutas
export async function getStaticPaths() {
  return LANGS.map((lang) => ({
    params: { lang },
  }));
}
---

<Layout
  lang={seoData.lang}
  title={seoData.title}
  description={seoData.description}
  canonical={seoData.canonical}
  ogImage={seoData.ogImage}
  noindex={seoData.noindex}
  keywords={seoData.keywords}
  structuredDataType={seoData.structuredDataType}
  structuredData={seoData.structuredData}
>
  <header class="flex w-full items-center align-middle justify-end p-5">
    <Theme />
    <Traductor />
  </header>
  <InfoPage data={data.main.home} />
  <Footer data={data.footer} />
</Layout>
