---
import "@/styles/global.css";
import SEO from "@/components/SEO/SEO.astro";
import { Toaster } from "solid-toast";
import type { PropsSEO } from "@/types/types";

declare global {
  interface Window {
    turnstile?: any;
    JustValidate?: any;
    handlePaymentSubmission: () => Promise<void>;
  }
}

const {
  lang = "es",
  title = "Amanah Academia - Aprende idiomas online",
  description = "Academia de idiomas online especializada en árabe y otros idiomas. Clases con profesores nativos.",
  canonical,
  ogImage,
  noindex,
  keywords,
  structuredDataType,
  structuredData,
} = Astro.props as PropsSEO;
---

<!doctype html>
<html lang={lang} class="m-0 w-full h-full">
  <head>
    <!-- Antes de cargar la pagina verificamos is ya teniamos tema previo -->
    <script>
      (function () {
        var theme =
          document.cookie
            .split("; ")
            .find((row) => row.startsWith("theme="))
            ?.split("=")[1] || "light";
        document.documentElement.classList.add(theme);
      })();
    </script>
    <!-- Codificacion -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <!-- Favicon clásico para compatibilidad total -->
    <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico" />
    <!-- Favicon SVG (para navegadores que lo soporten) -->
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <!-- PNG de fallback -->
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png" />
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png" sizes="180x180" />
    <!-- Manifest PWA -->
    <link rel="manifest" href="/favicon/site.webmanifest" />
    <!-- SEO Components -->
    <SEO
      title={title}
      description={description}
      canonical={canonical}
      ogImage={ogImage}
      noindex={noindex}
      keywords={keywords}
      structuredDataType={structuredDataType}
      structuredData={structuredData}
    />
  </head>
  <body class="m-0 w-full h-full bg-background">
    <slot />
    <Toaster
      client:load
      position="bottom-right"
      gutter={64}
      toastOptions={{
        duration: 5000,
        style: {
          "z-index": 9999,
        },
      }}
    />
  </body>
</html>
