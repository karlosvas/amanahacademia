---
import Title from "@/components/common/Title.astro";
import type { ArticleI18n } from "@/types/types";
import { getCollection } from "astro:content";
import type { ArticlesAstro } from "@/types/types";

const data = Astro.props.data as ArticleI18n;
const articles = (await getCollection("articles")) as ArticlesAstro[];
const R2_URL = import.meta.env.PUBLIC_R2_PUBLIC_URL;
---

<main class="w-11/12 md:w-3/4 m-auto text-black">
  <Title customStyleText="text-2xl " customStyleLine="w-20 mb-10">{data.title}</Title>
  <div class="w-full lg:w-1/2 m-auto pb-3">
    <p class="text-center font-semibold text-red">{data.summary[0]}</p>
    <p class="px-10 pb-5">{data.summary[1]}</p>
  </div>

  <div id="articles" class="mb-20 columns-1 sm:columns-2 md:columns-3 gap-4 p-4">
    {
      articles.map((article: ArticlesAstro) => {
        return (
          <a
            href={R2_URL + article.data.pdfUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="scroll-fade-in mb-4 break-inside-avoid rounded-lg bg-salmon overflow-hidden cursor-pointer block"
            style={`height: ${150 + Math.random() * 180}px; width: 100%`}
          >
            <img
              src={R2_URL + article.data.imageUrl}
              alt={article.data.title}
              class="w-full h-full rounded-lg object-cover object-top transition-transform duration-300 ease-out hover:scale-105"
              loading="lazy"
              decoding="async"
            />
          </a>
        );
      })
    }
  </div>
</main>
