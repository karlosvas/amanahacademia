---
import StarIcon from "@/assets/star.svg";
import { log } from "@/services/logger";

const { star, size } = Astro.props;
if (!star || !size || star < 0 || star > 5) {
  log.error("StarGroup component requires 'star' (0-5) and 'size' props");
  return null;
}
---

<div class="flex justify-center">
  {
    Array.from({ length: 5 }).map((_, i) => {
      if (star >= i + 1) {
        // Estrella completa
        return <StarIcon class="text-yellow-200" width={size} height={size} />;
      } else if (star > i && star >= i + 0.5) {
        // Media estrella: solo si la valoración es >= 0.5 sobre el índice
        return (
          <span class="relative inline-block" style={`width: ${size}px; height: ${size}px;`}>
            <span class="absolute top-0 left-0 w-1/2 h-full overflow-hidden">
              <StarIcon class="text-yellow-200" width={size} height={size} />
            </span>
            <StarIcon class="text-gray-100" width={size} height={size} />
          </span>
        );
      }
      // Estrella vacía
      return <StarIcon class="text-gray-100" width={size} height={size} />;
    })
  }
</div>
